{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///paperview.min.js","webpack:///webpack/bootstrap 3df0fdb64917d4418704","webpack:///./node_modules/css-loader/lib/css-base.js","webpack:///./node_modules/style-loader/lib/addStyles.js","webpack:///./src/utility/scale.ts","webpack:///./src/utility/support.ts","webpack:///./src/utility/embed-toolbar.ts","webpack:///./src/index.ts","webpack:///./src/viewer.ts","webpack:///./src/scss/viewer.scss?1050","webpack:///./src/scss/viewer.scss","webpack:///./node_modules/style-loader/lib/urls.js","webpack:///./src/scss/toolbar.scss?2168","webpack:///./src/scss/toolbar.scss","webpack:///./src/scss/comment.scss?c70c","webpack:///./src/scss/comment.scss","webpack:///./src/scss/animations.scss?a274","webpack:///./src/scss/animations.scss","webpack:///./src/utility/both.ts","webpack:///./src/utility/fetch.ts","webpack:///./src/utility/fetch-svg.ts","webpack:///./src/utility/comment-editor.ts","webpack:///./src/utility/mouse.ts","webpack:///./src/model/index.ts","webpack:///./src/model/page.model.ts","webpack:///./src/utility/embed-svg.ts","webpack:///./src/utility/embed-canvas.ts","webpack:///./src/model/comment.model.ts","webpack:///./src/safari.fix.ts"],"names":["root","factory","exports","module","define","amd","a","i","self","this","modules","__webpack_require__","moduleId","installedModules","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","cssWithMappingToString","item","useSourceMap","content","cssMapping","btoa","sourceMapping","toComment","concat","sources","map","source","sourceRoot","join","sourceMap","unescape","encodeURIComponent","JSON","stringify","list","toString","mediaQuery","alreadyImportedModules","length","id","push","addStylesToDom","styles","options","domStyle","stylesInDom","refs","j","parts","addStyle","listToStyles","newStyles","base","css","media","part","insertStyleElement","style","target","getElement","insertInto","Error","lastStyleElementInsertedAtTop","stylesInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","before","removeStyleElement","parentNode","removeChild","idx","indexOf","splice","createStyleElement","document","createElement","attrs","type","addAttrs","createLinkElement","link","rel","el","keys","forEach","key","setAttribute","obj","update","remove","result","transform","singleton","styleIndex","singletonCounter","applyToSingletonTag","bind","URL","createObjectURL","revokeObjectURL","Blob","updateLink","href","applyToTag","newObj","index","styleSheet","cssText","replaceText","cssNode","createTextNode","childNodes","autoFixUrls","undefined","convertToAbsoluteUrls","fixUrls","blob","oldSrc","isOldIE","fn","memo","apply","arguments","window","all","atob","selector","styleTarget","HTMLIFrameElement","contentDocument","head","e","querySelector","DEBUG","newList","mayRemove","textStore","replacement","filter","Boolean","scale","viewport","original","width","calc","floatVal","Math","round","px","value","_this","xhrSupported","xhrCORSSupported","getComputedStyle","currentStyle","height","max","documentElement","clientHeight","innerHeight","clientWidth","innerWidth","support","isXHRSupported","getXHR","isCORSSupported","isXDRSupported","XDomainRequest","XMLHttpRequest","ActiveXObject","ex","getXDR","zoomSize","tuple","zoomInOrOut","viewer","zoomCoef","pages","parseInt","nativeElement","updateToolbar","currentPage","element","getElementById","innerText","embedToolbar","innerHTML","body","zoomInBtn","zoomOutBtn","zoomFitBtn","onclick","preventDefault","stopPropagation","DEFAULT_ZOOM","scale_1","both_1","fetch_1","fetch_svg_1","embed_toolbar_1","embed_toolbar_2","comment_editor_1","mouse_1","model_1","safari_fix_1","PaperView","loaded","comments","DOC_DIM","VIEWPORT_DIM","VIEWPORT_DIM_FORCED","VERSION","SCROLL_NEXT","SCROLL_PREVIOUS","ZOOM_FIT_WIDTH","listeners","ready","safariFix","forceViewerSize","createViewer","opts","url","replace","container","mode","both","view","edit","svgFetchMode","toolbar","debug","doc","debugElement","offsetWidth","offsetHeight","load","imgsFetched","fetchURL","then","info","scaling","dimensions","numpages","Page","fetchSVG","Promise","resolve","imgDocs","render","appendTo","getDocWidth","getDocHeight","event_1","eventName","numPages","viewportSize","docSize","onscroll","scrollPos","getScrollPos","currPageNum","getCurrentPageNum","event_2","scrollTop","loadComments","enableComments","catch","error","console","log","data","Comment","renderComments","page","pageNum","warn","getPageOffset","offsetTop","scrollPosFixed","pagesTotalHeight","scrollTo","pixels","scrollToPage","number","getPageTopDistFromTop","scrollBy","on","callback","addPlugin","getPageDistFromTop","commentEditor","onSave","comment","Mouse","enable","up","coords","hide","selection","lightrange","getSelectionInfo","characters","hmr","locals","location","baseUrl","protocol","host","currentDir","pathname","fullMatch","origUrl","unquotedOrigUrl","trim","$1","test","newUrl","fallbacks","_i","_a","prop","handler","reject","xhr","support_1","responseType","open","onreadystatechange","readyState","status_1","status","response","withCredentials","send","newSVGElement","svgStr","placeholder","overrideMimeType","responseXML","svgText","responseText","svgDoc","show","editor","EDITOR_ID","top","y","left","x","onmouseup","button","textarea","getElementsByName","text","onSaved","MouseClass","coordinates","onmousemove","pageX","pageY","getCoords","__export","embed_svg_1","embed_canvas_1","size","baseWidth","baseHeight","imgDoc","rendering","embedCANVAS","embedSVG","pageSvg","imgUrl","pageCanvas","image","Image","canvas","onload","getContext","drawImage","src","viewportDimension","author","newViewportWidth","scaledTopPos","scaledLeftPos","removeFrom","serialize","viiewportDimension","svgs","querySelectorAll","svgElement","attr","getAttribute","xAttrs","split","val","parseFloat","i_1","nextValue"],"mappings":"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","file":"paperview.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 5);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(selector) {\n\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\tvar styleTarget = fn.call(this, selector);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[selector] = styleTarget;\n\t\t}\n\t\treturn memo[selector]\n\t};\n})(function (target) {\n\treturn document.querySelector(target)\n});\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = __webpack_require__(9);\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction scale(viewport, original) {\n    return viewport.width / original.width;\n}\nexports.scale = scale;\nfunction calc(floatVal, scale) {\n    if (scale === void 0) { scale = 1; }\n    return Math.round((floatVal * scale));\n}\nexports.calc = calc;\nfunction px(floatVal, scale) {\n    if (scale === void 0) { scale = 1; }\n    return calc(floatVal, scale) + \"px\";\n}\nexports.px = px;\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar _this = this;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar xhrSupported = null, xhrCORSSupported = null;\nexports.getComputedStyle = function (el) {\n    if ('getComputedStyle' in window) {\n        return window.getComputedStyle(el);\n    }\n    // IE <= 8\n    return el.currentStyle;\n};\nexports.height = function () {\n    Math.max(document.documentElement.clientHeight, window.innerHeight || 0);\n};\nexports.width = function () {\n    Math.max(document.documentElement.clientWidth, window.innerWidth || 0);\n};\nexports.support = {\n    /**\n     * Return true if XHR is supported\n     * @returns {boolean}\n     */\n    isXHRSupported: function () {\n        if (xhrSupported === null) {\n            xhrSupported = !!_this.getXHR();\n        }\n        return xhrSupported;\n    },\n    /**\n     * Return true if XHR is supported and is CORS-enabled\n     * @returns {boolean}\n     */\n    isCORSSupported: function () {\n        if (xhrCORSSupported === null) {\n            xhrCORSSupported = _this.isXHRSupported() &&\n                ('withCredentials' in _this.getXHR());\n        }\n        return xhrCORSSupported;\n    },\n    /**\n     * Return true if XDR is supported\n     * @returns {boolean}\n     */\n    isXDRSupported: function () {\n        return typeof window.XDomainRequest !== 'undefined';\n    },\n    /**\n     * Get a XHR object\n     * @returns {XMLHttpRequest} An XHR object\n     */\n    getXHR: function () {\n        if (window.XMLHttpRequest) {\n            return new window.XMLHttpRequest();\n        }\n        else {\n            try {\n                return new ActiveXObject('MSXML2.XMLHTTP.3.0');\n            }\n            catch (ex) {\n                return null;\n            }\n        }\n    },\n    /**\n     * Get a CORS-enabled request object\n     * @returns {XMLHttpRequest|XDomainRequest} The request object\n     */\n    getXDR: function () {\n        if (_this.isXDRSupported()) {\n            return new window.XDomainRequest();\n        }\n        return null;\n    },\n};\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DEFAULT_ZOOM = 1.0;\nvar ZOOM = 1.0;\nvar ORIGINAL_SIZE;\nfunction zoomSize(tuple, scale) {\n    return { width: (tuple.width * scale), height: tuple.height * scale };\n}\nexports.zoomSize = zoomSize;\nfunction zoomInOrOut(viewer, zoomCoef) {\n    // ZOOM = Math.round(ZOOM * zoomCoef)\n    // let originalSize = viewer.getDocHeight()\n    if (zoomCoef === 1) {\n        // @TODO Not finding satisfiying solution to rever to default zoom\n        // revert to original zoom level (coef = 1)\n    }\n    for (var i in viewer.pages) {\n        var width = parseInt(viewer.pages[i].width) * zoomCoef;\n        var height = parseInt(viewer.pages[i].height) * zoomCoef;\n        viewer.pages[i].width = Math.round(width);\n        viewer.pages[i].height = Math.round(height);\n        viewer.pages[i].nativeElement.width = Math.round(width) + \"px\";\n        viewer.pages[i].nativeElement.height = Math.round(height) + \"px\";\n        // @TODO Tried to adjust scroll when zoom is modified\n        // but this does not yield satisfing results\n        // let heightDiff = originalHeight - Math.round(originalHeight * zoomCoef)\n        // height diff will automatically be negative when zoomed\n        // if (zoomCoef < 1) {\n        //     viewer.scrollBy(-100 * zoomCoef)\n        // } else if (zoomCoef > 1) {\n        //     viewer.scrollBy(100)\n        // }\n    }\n}\nexports.zoomInOrOut = zoomInOrOut;\nfunction updateToolbar(currentPage) {\n    var element = document.getElementById('crocodoc-toolbar-pages');\n    if (element) {\n        element.innerText = \"\" + currentPage;\n    }\n}\nexports.updateToolbar = updateToolbar;\nfunction embedToolbar(viewer) {\n    var element = document.createElement('div');\n    element.setAttribute('class', 'crocodoc-toolbar');\n    if (element == null) {\n        return;\n    }\n    element.innerHTML = \"<div class=\\\"crocodoc-toolbar\\\">\\n        <div class=\\\"crocodoc-toolbar-inner\\\">\\n            <a class=\\\"crocodoc-toolbar-element\\\" href=\\\"\\\" id=\\\"crodococ-btn-zoom-in\\\">In</a>\\n            <a class=\\\"crocodoc-toolbar-element\\\" href=\\\"\\\" id=\\\"crodococ-btn-zoom-out\\\">Out</a>\\n            <a class=\\\"crocodoc-toolbar-element\\\" href=\\\"\\\" id=\\\"crodococ-btn-zoom-fit\\\">Fit</a>\\n            <span id=\\\"crocodoc-toolbar-pages\\\" class=\\\"crocodoc-toolbar-element crocodoc-toolbar-pages\\\"></span>\\n        </div>\\n    </div>\";\n    document.body.appendChild(element);\n    var zoomInBtn = document.getElementById('crodococ-btn-zoom-in');\n    var zoomOutBtn = document.getElementById('crodococ-btn-zoom-out');\n    var zoomFitBtn = document.getElementById('crodococ-btn-zoom-fit');\n    // ORIGINAL_SIZE.width = parseInt(viewer.pages[0].style.width)\n    // ORIGINAL_SIZE.height = parseInt(viewer.pages[0].style.height)\n    zoomInBtn.onclick = function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        zoomInOrOut(viewer, DEFAULT_ZOOM + 0.15);\n    };\n    zoomOutBtn.onclick = function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        zoomInOrOut(viewer, DEFAULT_ZOOM - 0.15);\n    };\n    zoomFitBtn.onclick = function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        zoomInOrOut(viewer, DEFAULT_ZOOM);\n    };\n}\nexports.embedToolbar = embedToolbar;\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * @author Romain BRUCKERT\n * https://github.com/adadgio/paperview-js\n */\n__export(__webpack_require__(6));\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__webpack_require__(7);\n__webpack_require__(10);\n__webpack_require__(12);\n__webpack_require__(14);\nvar scale_1 = __webpack_require__(2);\nvar both_1 = __webpack_require__(16);\nvar fetch_1 = __webpack_require__(17);\nvar fetch_svg_1 = __webpack_require__(18);\nvar embed_toolbar_1 = __webpack_require__(4);\nvar embed_toolbar_2 = __webpack_require__(4);\nvar comment_editor_1 = __webpack_require__(19);\nvar mouse_1 = __webpack_require__(20);\nvar model_1 = __webpack_require__(21);\nvar safari_fix_1 = __webpack_require__(26);\nvar PaperView = /** @class */ (function () {\n    function PaperView() {\n        this.options = {};\n        this.loaded = false;\n        this.pages = [];\n        this.comments = [];\n        this.DOC_DIM = { width: 0, height: 0 };\n        this.VIEWPORT_DIM = { width: 0, height: 0 };\n        this.VIEWPORT_DIM_FORCED = false;\n        this.VERSION = '1.0.5';\n        this.SCROLL_NEXT = 'next';\n        this.SCROLL_PREVIOUS = 'previous';\n        this.ZOOM_FIT_WIDTH = 'fitwidth';\n        this.listeners = { ready: function () { } };\n        this.safariFix = safari_fix_1.safariFix;\n    }\n    // helper to fix Android window height/width on mobile browsers\n    // https://stackoverflow.com/questions/10610743/android-browsers-screen-width-screen-height-window-innerwidth-window-inner\n    PaperView.prototype.forceViewerSize = function (width, height) {\n        this.VIEWPORT_DIM_FORCED = true;\n        this.VIEWPORT_DIM.width = width;\n        this.VIEWPORT_DIM.height = height;\n        return this;\n    };\n    PaperView.prototype.createViewer = function (selector, opts) {\n        this.options = opts;\n        this.options.url = opts.url.replace(/\\/$/, '');\n        this.container = document.getElementById(selector.replace('#', ''));\n        this.options.mode = (typeof opts.mode !== 'undefined') ? opts.mode : 'svg';\n        this.options.comments = (typeof opts.comments !== 'undefined') ? both_1.both(opts.comments, { view: true, edit: true }) : { view: true, edit: true };\n        this.options.svgFetchMode = (typeof opts.svgFetchMode === 'undefined') ? 'response/document' : opts.svgFetchMode;\n        this.options.toolbar = (typeof opts.toolbar === 'undefined') ? false : opts.toolbar;\n        this.options.debug = (typeof opts.debug === 'undefined') ? false : opts.debug;\n        this.viewport = document.createElement('div');\n        this.doc = document.createElement('div');\n        this.viewport.setAttribute('id', 'crocodoc-viewport');\n        this.viewport.setAttribute('class', 'crocodoc-viewport');\n        this.doc.setAttribute('class', 'crocodoc-doc');\n        this.container.appendChild(this.viewport);\n        this.viewport.appendChild(this.doc);\n        // temp debug\n        if (true === this.options.debug) {\n            var debugElement = document.createElement('div');\n            debugElement.setAttribute('class', 'debug');\n            debugElement.innerHTML = \"paperview-js v\" + this.VERSION + \" <span id=\\\"scroll-pos\\\"></span>\";\n            this.container.appendChild(debugElement);\n        }\n        if (!this.VIEWPORT_DIM_FORCED) {\n            this.VIEWPORT_DIM.width = this.viewport.offsetWidth;\n            this.VIEWPORT_DIM.height = this.viewport.offsetHeight;\n        }\n        return this;\n    };\n    PaperView.prototype.load = function () {\n        var _this = this;\n        var imgsFetched = [];\n        var textsLoaded = [];\n        fetch_1.fetchURL(this.options.url + \"/info.json\", 'json').then(function (info) {\n            var scaling = scale_1.scale(_this.VIEWPORT_DIM, info.dimensions);\n            // create requests for each pages (svg + text elements)\n            for (var i = 0; i < info.numpages; i++) {\n                _this.pages.push(new model_1.Page(info.dimensions, scaling));\n                if (_this.options.mode === 'svg') {\n                    imgsFetched.push(fetch_svg_1.fetchSVG(_this.options.url + \"/page-\" + (i + 1) + \".svg\", _this.options.svgFetchMode));\n                }\n                else if (_this.options.mode === 'canvas' || _this.options.mode === 'png') {\n                    var url = _this.options.url + \"/page-\" + (i + 1) + \".png\";\n                    imgsFetched.push(Promise.resolve(url));\n                }\n                // @TODO uncomment to load dirty text layer\n                // textsLoaded.push(fetchTEXT(`${this.options.url}/text-${i+1}.html`))\n            }\n            // @TODO uncomment to render dirty text layer\n            // Promise.all(textsLoaded).then(res => {\n            //     for (var i=0; i < info.numpages; i++) {\n            //         const bodyElement: HTMLElement = res[i]\n            //         const html = bodyElement.innerHTML;\n            //         const page: HTMLElement = this.pages[i]\n            //\n            //         embedText(page, html)\n            //     }\n            // })\n            Promise.all(imgsFetched).then(function (imgDocs) {\n                for (var i = 0; i < info.numpages; i++) {\n                    var page = _this.pages[i];\n                    page.render(imgDocs[i], i, _this.options.mode).appendTo(_this.doc);\n                }\n                _this.loaded = true;\n                // set sizes only when all pages are loaded\n                _this.DOC_DIM.width = _this.getDocWidth();\n                _this.DOC_DIM.height = _this.getDocHeight();\n                if (typeof _this.listeners['ready'] === 'function') {\n                    var event_1 = { eventName: 'ready', numPages: _this.pages.length, dimensions: { viewportSize: _this.VIEWPORT_DIM, docSize: _this.DOC_DIM } };\n                    _this.listeners['ready'](event_1);\n                }\n                // attach scroll event\n                _this.viewport.onscroll = function (e) {\n                    if (typeof _this.listeners['scroll'] === 'function') {\n                        var scrollPos = _this.getScrollPos();\n                        var currPageNum = _this.getCurrentPageNum();\n                        // show current page and other info in toolbar\n                        if (_this.options.toolbar) {\n                            document.getElementById('scroll-pos').innerText = \"\" + scrollPos;\n                            embed_toolbar_2.updateToolbar(currPageNum);\n                        }\n                        var event_2 = { eventName: 'scroll', scrollTop: scrollPos, numPages: _this.pages.length, currentPage: currPageNum };\n                        _this.listeners['scroll'](event_2);\n                    }\n                };\n                if (true === _this.options.comments.view) {\n                    _this.loadComments();\n                }\n                if (true === _this.options.comments.edit) {\n                    _this.enableComments();\n                }\n                // display the bottom toolbar when document is loaded\n                if (true === _this.options.toolbar) {\n                    embed_toolbar_1.embedToolbar(_this);\n                }\n            }).catch(function (error) { console.log(error); });\n        });\n    };\n    PaperView.prototype.loadComments = function () {\n        var _this = this;\n        fetch_1.fetchURL(this.options.url + \"/comments.json\", 'json').then(function (comments) {\n            comments = (null === comments) ? [] : comments;\n            _this.comments = comments.map(function (data) { return new model_1.Comment(data); });\n            _this.renderComments();\n        });\n    };\n    PaperView.prototype.renderComments = function () {\n        for (var i in this.comments) {\n            var page = this.pages[this.comments[i].pageNum];\n            this.comments[i].render().appendTo(page, this.VIEWPORT_DIM.width);\n        }\n    };\n    PaperView.prototype.getDocHeight = function () {\n        if (!this.loaded) {\n            console.warn(\"All pages are not loaded yet and you are calling ::getDocHeight before: height value could be flawed.\");\n        }\n        return this.doc.offsetHeight;\n    };\n    PaperView.prototype.getDocWidth = function () {\n        if (!this.loaded) {\n            console.warn(\"All pages are not loaded yet and you are calling ::getDocWidth before: width value could be flawed.\");\n        }\n        return this.doc.offsetWidth;\n    };\n    PaperView.prototype.getScrollPos = function () {\n        return this.viewport.scrollTop;\n    };\n    PaperView.prototype.getPageOffset = function (pageNum) {\n        return this.pages[pageNum - 1].offsetTop(pageNum);\n    };\n    PaperView.prototype.getCurrentPageNum = function () {\n        var scrollPos = this.getScrollPos();\n        // page num would be the page currently at 2/3 of viewport\n        var scrollPosFixed = scrollPos + (this.VIEWPORT_DIM.height * 0.666);\n        var pageNum = 0;\n        var pagesTotalHeight = 0;\n        for (var i in this.pages) {\n            pagesTotalHeight += this.pages[i].height;\n            if (scrollPosFixed >= pagesTotalHeight) {\n                pageNum++;\n            }\n        }\n        return pageNum;\n    };\n    PaperView.prototype.scrollTo = function (pixels) {\n        pixels = (typeof pixels === 'string') ? parseInt(pixels) : pixels;\n        this.viewport.scrollTop = pixels;\n        return this;\n    };\n    PaperView.prototype.scrollToPage = function (number) {\n        var pixels = this.getPageTopDistFromTop(number);\n        if (null !== pixels) {\n            this.scrollTo(pixels);\n        }\n        else {\n            console.warn(\"::scrollToPage() Cannot scroll because this page number does not exist)\");\n        }\n        return this;\n    };\n    PaperView.prototype.scrollTop = function () {\n        this.viewport.scrollTop = 0;\n        return this;\n    };\n    PaperView.prototype.scrollBy = function (pixels) {\n        pixels = (typeof pixels === 'string') ? parseInt(pixels) : pixels;\n        this.viewport.scrollTop += pixels;\n        return this;\n    };\n    PaperView.prototype.on = function (eventName, callback) {\n        this.listeners[eventName] = callback;\n        return this;\n    };\n    PaperView.prototype.addPlugin = function (name) {\n    };\n    PaperView.prototype.getPageDistFromTop = function (number) {\n        var pixels = 0;\n        var scrollTop = this.viewport.scrollTop;\n        for (var i in this.pages) {\n            var index = parseInt(i);\n            var pageHeight = this.pages[i].height;\n            // pixels +=\n            // @TODO\n            // if ((index === number)) {\n            //\n            // }\n        }\n        return null;\n    };\n    PaperView.prototype.getPageTopDistFromTop = function (number) {\n        var pixels = 0;\n        for (var i in this.pages) {\n            if ((parseInt(i) + 1) === number) {\n                return pixels;\n            }\n            pixels += this.pages[i].height;\n        }\n        return pixels;\n    };\n    PaperView.prototype.enableComments = function () {\n        var _this = this;\n        comment_editor_1.commentEditor().onSave(function (comment) {\n            _this.comments.push(comment);\n            _this.renderComments();\n        });\n        mouse_1.Mouse.enable().up(function (e, coords) {\n            comment_editor_1.commentEditor().hide();\n            var selection = lightrange.getSelectionInfo();\n            var currPageNum = _this.getCurrentPageNum();\n            // let pageTopDist = this.getPageDistFromTop(currPageNum)\n            // let topFromPage = selection.yStart + pageTopDist\n            // let selection = window.getSelection()\n            // let oRange = selection.getRangeAt(0) // get text range\n            // let oRect = oRange.getBoundingClientRect()\n            // let pageNum = this.getCurrentPageNum()\n            //\n            // let jsonComment: JsonComment = {\n            //     pageNum: pageNum,\n            //     top: oRect.top,\n            //     left: oRect.left,\n            //     text: selection.toString(),\n            //     scrollPos: this.getScrollPos(),\n            //     viewportDimension: this.VIEWPORT_DIM,\n            // }\n            if (selection.characters === 0) {\n                return;\n            }\n            // let realPageSelected = e.target;\n            // let comment: Comment = new Comment({\n            //     pageNum: currPageNum,\n            //     top: topFromPage,\n            //     left: selection.xStart,\n            //     text: selection.text,\n            //     scrollPos: this.getScrollPos(),\n            //     viewportDimension: this.VIEWPORT_DIM,\n            // })\n            // commentEditor().show(comment, coords)\n        });\n    };\n    return PaperView;\n}());\nexports.PaperView = PaperView;\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(8);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = __webpack_require__(1)(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./viewer.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./viewer.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(0)(false);\n// imports\n\n\n// module\nexports.push([module.i, \"*, html, body {\\n  touch-action: manipulation !important; }\\n\\n.crocodoc-viewport {\\n  margin: 0;\\n  padding: 0;\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  left: 0;\\n  height: 100%;\\n  width: 100%;\\n  overflow: auto;\\n  -webkit-overflow-scrolling: touch; }\\n\\n.crocodoc-doc {\\n  width: auto;\\n  overflow: hidden;\\n  position: relative;\\n  text-align: center;\\n  font-size: 100%;\\n  background-color: #f3f3f3; }\\n  .crocodoc-doc.crocodoc-doc-background-gray {\\n    background-color: #f3f3f3; }\\n\\n.crocodoc-page-custom {\\n  position: relative;\\n  background-color: #fff;\\n  margin-left: auto;\\n  margin-right: auto;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none; }\\n\\n.crocodoc-page-svg-custom,\\n.crocodoc-page-text-customn\\n.crocodoc-page-canvas-custom {\\n  width: 100%;\\n  height: 100%;\\n  position: absolute; }\\n\\n.crocodoc-page-text-custom .textLayer {\\n  height: 100%;\\n  position: absolute;\\n  width: 100% !important;\\n  height: 100% !important; }\\n  .crocodoc-page-text-custom .textLayer > div {\\n    position: absolute; }\\n\\n.debug {\\n  position: fixed;\\n  bottom: 0;\\n  right: 0;\\n  background: #FFF8DC;\\n  padding: 8px;\\n  color: #5a5a5a;\\n  font-family: Arial, sans-serif;\\n  font-size: 12px; }\\n\\n.line1 {\\n  position: absolute;\\n  width: 1px;\\n  top: 0px;\\n  left: 203px;\\n  height: 251px;\\n  z-index: 99; }\\n\\n.line2 {\\n  position: absolute;\\n  background: green;\\n  width: 1px;\\n  top: 0px;\\n  left: 208px;\\n  height: 251px;\\n  z-index: 100; }\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports) {\n\n\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(11);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = __webpack_require__(1)(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./toolbar.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./toolbar.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(0)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".crocodoc-toolbar {\\n  position: fixed;\\n  bottom: 16px;\\n  right: 16px;\\n  background-color: #333;\\n  border-radius: 3px;\\n  -moz-border-radius: 3px;\\n  -webkit-border-radius: 3px;\\n  font-size: 14px;\\n  font-family: Arial, sans-serif;\\n  -webkit-font-smoothing: antialiased;\\n  -moz-osx-font-smoothing: grayscale; }\\n  .crocodoc-toolbar .crocodoc-toolbar-inner {\\n    position: relative;\\n    display: flex;\\n    flex-direction: row;\\n    align-items: center;\\n    color: #f9f9f9;\\n    padding: 16px 8px; }\\n    .crocodoc-toolbar .crocodoc-toolbar-inner a {\\n      color: inherit;\\n      text-decoration: none; }\\n    .crocodoc-toolbar .crocodoc-toolbar-inner .crocodoc-toolbar-element {\\n      display: flex;\\n      flex-direction: row;\\n      align-items: center;\\n      padding-left: 8px;\\n      padding-left: 8px; }\\n\\n.ico {\\n  max-width: 256px;\\n  max-height: 256px; }\\n\\n.ico.ico-zoom-in {\\n  color: white;\\n  width: 20px;\\n  height: 20px;\\n  font-size: 16px;\\n  background-image: url(\\\"data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUyLjk2NiA1Mi45NjYiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUyLjk2NiA1Mi45NjY7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iMjRweCIgaGVpZ2h0PSIyNHB4Ij4KPGc+Cgk8cGF0aCBkPSJNMjguOTgzLDIwaC02di02YzAtMC41NTItMC40NDgtMS0xLTFzLTEsMC40NDgtMSwxdjZoLTZjLTAuNTUyLDAtMSwwLjQ0OC0xLDFzMC40NDgsMSwxLDFoNnY2YzAsMC41NTIsMC40NDgsMSwxLDEgICBzMS0wLjQ0OCwxLTF2LTZoNmMwLjU1MiwwLDEtMC40NDgsMS0xUzI5LjUzNSwyMCwyOC45ODMsMjB6IiBmaWxsPSIjMDAwMDAwIi8+Cgk8cGF0aCBkPSJNNTEuNzA0LDUxLjI3M0wzNi44NDUsMzUuODJjMy43OS0zLjgwMSw2LjEzOC05LjA0MSw2LjEzOC0xNC44MmMwLTExLjU4LTkuNDItMjEtMjEtMjFzLTIxLDkuNDItMjEsMjFzOS40MiwyMSwyMSwyMSAgIGM1LjA4MywwLDkuNzQ4LTEuODE3LDEzLjM4NC00LjgzMmwxNC44OTUsMTUuNDkxYzAuMTk2LDAuMjA1LDAuNDU4LDAuMzA3LDAuNzIxLDAuMzA3YzAuMjUsMCwwLjQ5OS0wLjA5MywwLjY5My0wLjI3OSAgIEM1Mi4wNzQsNTIuMzA0LDUyLjA4Niw1MS42NzEsNTEuNzA0LDUxLjI3M3ogTTIuOTgzLDIxYzAtMTAuNDc3LDguNTIzLTE5LDE5LTE5czE5LDguNTIzLDE5LDE5cy04LjUyMywxOS0xOSwxOSAgIFMyLjk4MywzMS40NzcsMi45ODMsMjF6IiBmaWxsPSIjMDAwMDAwIi8+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPC9zdmc+Cg==\\\"); }\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(13);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = __webpack_require__(1)(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./comment.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./comment.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(0)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".crocodoc-doc .crocodoc-page-custom {\\n  position: relative; }\\n  .crocodoc-doc .crocodoc-page-custom .crocodoc-comment {\\n    position: absolute;\\n    width: auto;\\n    font-size: 14px;\\n    font-family: Arial, sans-serif;\\n    opacity: 0.9;\\n    border-radius: 2px;\\n    -moz-border-radius: 2px;\\n    -webkit-border-radius: 2px;\\n    -webkit-font-smoothing: antialiased;\\n    -moz-osx-font-smoothing: grayscale;\\n    margin-top: -6px; }\\n    .crocodoc-doc .crocodoc-page-custom .crocodoc-comment.visible {\\n      display: block; }\\n    .crocodoc-doc .crocodoc-page-custom .crocodoc-comment.hidden {\\n      display: none; }\\n    .crocodoc-doc .crocodoc-page-custom .crocodoc-comment .crocodoc-comment-underline {\\n      position: absolute;\\n      width: 100%;\\n      height: 1px;\\n      border-top: 2px dashed red; }\\n    .crocodoc-doc .crocodoc-page-custom .crocodoc-comment .crocodoc-comment-text {\\n      color: #f5f5f5;\\n      background-color: #333;\\n      margin-top: 8px; }\\n      .crocodoc-doc .crocodoc-page-custom .crocodoc-comment .crocodoc-comment-text .crocodoc-comment-text-inner {\\n        line-height: 1.6em;\\n        max-width: 460px;\\n        word-wrap: break-word;\\n        padding: 4px 8px; }\\n\\n.crocodoc-comment-editor {\\n  position: fixed;\\n  color: #333;\\n  border: 1px solid #e0e0e0;\\n  box-shadow: 0px 0px 8px #e4e4e4;\\n  background-color: #fff;\\n  font-size: 14px;\\n  font-family: Arial, sans-serif;\\n  z-index: 99;\\n  -webkit-font-smoothing: antialiased;\\n  -moz-osx-font-smoothing: grayscale;\\n  border-radius: 3px;\\n  -moz-border-radius: 3px;\\n  -webkit-border-radius: 3px; }\\n  .crocodoc-comment-editor .crocodoc-comment-editor-inner {\\n    display: flex;\\n    flex-direction: column;\\n    padding: 16px 24px; }\\n    .crocodoc-comment-editor .crocodoc-comment-editor-inner label {\\n      color: gray;\\n      margin-bottom: 8px; }\\n    .crocodoc-comment-editor .crocodoc-comment-editor-inner textarea {\\n      color: inherit;\\n      font-size: inherit;\\n      font-family: inherit;\\n      padding: 8px;\\n      background: #fbfbfb;\\n      border: 1px solid #e0e0e0;\\n      margin-bottom: 8px; }\\n      .crocodoc-comment-editor .crocodoc-comment-editor-inner textarea:focus {\\n        outline: none; }\\n    .crocodoc-comment-editor .crocodoc-comment-editor-inner button {\\n      cursor: pointer;\\n      color: #fff;\\n      font-size: inherit;\\n      font-family: inherit;\\n      border: none;\\n      padding: 8px;\\n      background-color: #2663c1;\\n      border-radius: 2px;\\n      -moz-border-radius: 2px;\\n      -webkit-border-radius: 2px;\\n      outline: none;\\n      animation: background-color 0.3s ease; }\\n      .crocodoc-comment-editor .crocodoc-comment-editor-inner button:hover {\\n        background-color: #3574d6; }\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(15);\nif(typeof content === 'string') content = [[module.i, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = __webpack_require__(1)(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(false) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./animations.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./animations.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(0)(false);\n// imports\n\n\n// module\nexports.push([module.i, \"@keyframes fadeIn {\\n  from {\\n    opacity: 0; }\\n  to {\\n    opacity: 1; } }\\n\\n@keyframes fadeOut {\\n  from {\\n    opacity: 1; }\\n  to {\\n    opacity: 0; } }\\n\\n.fade-in {\\n  animation: fadeIn .20s forwards; }\\n\\n.fade-out {\\n  animation: fadeOut .20s forwards; }\\n\", \"\"]);\n\n// exports\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction both(value, fallbacks) {\n    var result = fallbacks;\n    if (typeof value === 'boolean') {\n        for (var _i = 0, _a = Object.keys(fallbacks); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            result[prop] = value;\n        }\n    }\n    else if (typeof value === 'object') {\n        result = value;\n    }\n    return result;\n}\nexports.both = both;\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar support_1 = __webpack_require__(3);\nfunction fetchURL(url, type, handler) {\n    if (type === void 0) { type = 'text'; }\n    if (handler === void 0) { handler = function () { }; }\n    return new Promise(function (resolve, reject) {\n        var xhr = support_1.support.getXHR();\n        xhr.responseType = type; //'arraybuffer|string'. seel also https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseType\n        xhr.open('GET', url, true); // let true be async request\n        xhr.onreadystatechange = function () {\n            if (xhr.readyState == 4) {\n                var status_1 = xhr.status;\n                // remove the onreadystatechange handler,\n                // because it could be called again\n                // @NOTE: we replace it with a noop function, because\n                // IE8 will throw an error if the value is not of type\n                // 'function' when using ActiveXObject\n                xhr.onreadystatechange = function () { };\n                // status is 0 for successful local file requests, so assume 200\n                if (status_1 === 0) {\n                    status_1 = 200;\n                }\n                if (status_1 < 500) {\n                    if (status_1 !== 200) {\n                        console.warn(\"fetchURL() Resolved to \" + status_1);\n                    }\n                    resolve(xhr.response);\n                }\n                else {\n                    reject(xhr);\n                }\n            }\n        };\n        // this needs to be after the open call and before the send call\n        xhr.withCredentials = true;\n        xhr.send();\n    });\n}\nexports.fetchURL = fetchURL;\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar support_1 = __webpack_require__(3);\nfunction fetchSVG(url, handler, responseType) {\n    if (handler === void 0) { handler = function () { }; }\n    if (responseType === void 0) { responseType = 'type/document'; }\n    function newSVGElement(svgStr) {\n        // const SVG_CONTAINER_TEMPLATE = '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"><script><![CDATA[('+PROXY_SVG+')()]]></script></svg>'\n        var placeholder = document.createElement('div');\n        placeholder.innerHTML = svgStr;\n        var svgElement = placeholder.firstChild;\n        return svgElement;\n    }\n    return new Promise(function (resolve, reject) {\n        var xhr = support_1.support.getXHR();\n        if (responseType === 'type/document') {\n            xhr.responseType = 'document';\n        }\n        else if (responseType === 'type/text') {\n            xhr.responseType = 'text';\n        }\n        // xhr.respectType = 'application/json;charset:utf-8'\n        xhr.overrideMimeType('image/svg+xml');\n        xhr.open('GET', url, true);\n        xhr.onreadystatechange = function () {\n            if (xhr.readyState == 4) {\n                var status_1 = xhr.status;\n                // remove the onreadystatechange handler,\n                // because it could be called again\n                // @NOTE: we replace it with a noop function, because\n                // IE8 will throw an error if the value is not of type\n                // 'function' when using ActiveXObject\n                xhr.onreadystatechange = function () { };\n                // status is 0 for successful local file requests, so assume 200\n                if (status_1 === 0) {\n                    status_1 = 200;\n                }\n                if (status_1 === 200) {\n                    if (responseType === 'type/document') {\n                        resolve(xhr.responseXML.documentElement);\n                    }\n                    else if (responseType === 'type/text') {\n                        // let svgText = encodeURIComponent(xhr.responseText)\n                        var svgText = xhr.responseText;\n                        svgText = svgText.replace(/&#x2019;/g, \"'\");\n                        svgText = svgText.replace(/&#xe002;/g, ' ');\n                        var svgDoc = newSVGElement(svgText);\n                        resolve(svgDoc);\n                    }\n                }\n                else {\n                    reject(xhr);\n                }\n            }\n        };\n        // this needs to be after the open call and before the send call\n        xhr.withCredentials = true;\n        xhr.send();\n    });\n}\nexports.fetchSVG = fetchSVG;\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar onSaved = function () { };\nvar EDITOR_ID = 'crocodoc-comment-editor';\nfunction show(comment, coords) {\n    var editor = document.createElement('div');\n    editor.setAttribute('id', EDITOR_ID);\n    editor.setAttribute('class', 'crocodoc-comment-editor fade-in');\n    editor.innerHTML = \"<div class=\\\"crocodoc-comment-editor-inner\\\">\\n        <label>Comment on this</label>\\n        <textarea cols=\\\"28\\\" rows=\\\"4\\\" name=\\\"crodocodoc_comment_text\\\"></textarea>\\n        <button id=\\\"crocodoc-comment-save-btn\\\">Save</button>\\n    </div>\";\n    document.body.appendChild(editor);\n    // place the comment editor next to the mouse\n    if (coords) {\n        editor.style.top = coords.y + \"px\";\n        editor.style.left = coords.x + \"px\";\n    }\n    // prevent mousedown events to bubble up to the dom otherwise\n    // editor gets hidden again as soon as the  mouse goes up when you\n    // are trying to fill in the textarea or click on the button\n    editor.onmouseup = function (e) {\n        e.stopPropagation();\n    };\n    var button = document.getElementById('crocodoc-comment-save-btn');\n    var textarea = document.getElementsByName('crodocodoc_comment_text')[0];\n    // textarea.onfocus = (e) => {\n    //     e.preventDefault()\n    // }\n    button.onclick = function (e) {\n        e.preventDefault();\n        comment.text = textarea.value;\n        onSaved(comment);\n    };\n}\nfunction hide() {\n    var editor = document.getElementById(EDITOR_ID);\n    if (editor) {\n        editor.setAttribute('class', 'crocodoc-comment-editor fade-out');\n        document.body.removeChild(editor);\n    }\n}\nfunction onSave(then) {\n    onSaved = then;\n}\nfunction commentEditor() {\n    return {\n        show: show,\n        hide: hide,\n        onSave: onSave\n    };\n}\nexports.commentEditor = commentEditor;\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar MouseClass = /** @class */ (function () {\n    function MouseClass() {\n        this.coordinates = { x: null, y: null };\n    }\n    MouseClass.prototype.enable = function () {\n        var _this = this;\n        document.onmousemove = function (e) {\n            _this.coordinates = { x: e.pageX, y: e.pageY };\n        };\n        return this;\n    };\n    MouseClass.prototype.up = function (then) {\n        var _this = this;\n        document.onmouseup = function (e) {\n            then(e, _this.getCoords());\n        };\n    };\n    MouseClass.prototype.getCoords = function () {\n        return this.coordinates;\n    };\n    return MouseClass;\n}());\nexports.Mouse = new MouseClass();\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(__webpack_require__(22));\n__export(__webpack_require__(25));\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar scale_1 = __webpack_require__(2);\nvar embed_svg_1 = __webpack_require__(23);\nvar embed_canvas_1 = __webpack_require__(24);\nvar Page = /** @class */ (function () {\n    function Page(size, scale) {\n        if (scale === void 0) { scale = 1; }\n        this.scale = 1;\n        this.scale = scale;\n        this.baseWidth = size.width;\n        this.baseHeight = size.height;\n    }\n    Page.prototype.appendTo = function (doc) {\n        doc.appendChild(this.nativeElement);\n        return this;\n    };\n    Page.prototype.render = function (imgDoc, index, rendering) {\n        if (rendering === void 0) { rendering = 'svg'; }\n        this.nativeElement = document.createElement('div');\n        this.nativeElement.setAttribute('class', 'crocodoc-page-custom');\n        this.nativeElement.setAttribute('data-index', \"\" + index);\n        // scale the width and height according to scale\n        this.width = scale_1.calc(this.baseWidth, this.scale);\n        this.height = scale_1.calc(this.baseHeight, this.scale);\n        this.nativeElement.setAttribute('style', \"width: \" + this.width + \"px; height:\" + this.height + \"px\");\n        if (rendering === 'canvas') {\n            embed_canvas_1.embedCANVAS(this.nativeElement, imgDoc);\n        }\n        else if (rendering === 'svg') {\n            embed_svg_1.embedSVG(this.nativeElement, imgDoc);\n        }\n        return this;\n    };\n    Page.prototype.offsetTop = function (index) {\n        index = (typeof index === 'string') ? parseInt(index) : index;\n        return ((index + 1) * this.height) - this.height;\n    };\n    return Page;\n}());\nexports.Page = Page;\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction embedSVG(page, svgDoc) {\n    // let dataURLPrefix = 'data:image/svg+xml';\n    // let svgContainerTemplate = '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"></svg>'; // <script><![CDATA[('+PROXY_SVG+')()]]></script>\n    // let svgEl: any = document.createElement('svg')\n    // svgEl.src = svgDoc\n    var pageSvg = document.createElement('div');\n    pageSvg.setAttribute('class', 'crocodoc-page-svg-custom');\n    // scale the svg image to fit the page container\n    // viewBox=\"0 0 800 1136.38722716249\"\n    svgDoc.setAttribute('preserveAspectRatio', 'xMinYMin slice'); // slice|meet\n    // svgDoc.setAttribute('width', `${page.offsetWidth}px`)\n    // svgDoc.setAttribute('height', `${page.offsetHeight}px`)\n    svgDoc.setAttribute('width', \"100%\");\n    svgDoc.setAttribute('height', \"100%\");\n    // svgDoc.setAttribute('viewBox', `0 0 ${page.offsetWidth} ${page.offsetHeight}`)\n    pageSvg.appendChild(svgDoc);\n    page.appendChild(pageSvg);\n}\nexports.embedSVG = embedSVG;\n// case EMBED_STRATEGY_DATA_URL_IMG:\n//     svgEl = $svg[0];\n//     dataURLPrefix = 'data:' + SVG_MIME_TYPE;\n//     if (!browser.ie && window.btoa) {\n//         svgEl.src = dataURLPrefix + ';base64,' + window.btoa(svgText);\n//     } else {\n//         svgEl.src = dataURLPrefix + ',' + encodeURIComponent(svgText);\n//     }\n//     break;\n// var SVG_MIME_TYPE = 'image/svg+xml',\n//     HTML_TEMPLATE = '<style>html,body{width:100%;height:100%;margin:0;overflow:hidden;}</style>',\n//     SVG_CONTAINER_TEMPLATE = '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"><script><![CDATA[('+PROXY_SVG+')()]]></script></svg>',\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction embedCANVAS(page, imgUrl) {\n    var pageCanvas = document.createElement('div');\n    pageCanvas.setAttribute('class', 'crocodoc-page-canvas-custom');\n    page.appendChild(pageCanvas);\n    var image = new Image();\n    var canvas = document.createElement('canvas');\n    image.onload = function () {\n        var scaleFactor = 1.8;\n        canvas.width = page.offsetWidth; // / scaleFactor\n        canvas.height = page.offsetHeight; // / scaleFactor\n        // let w = page.offsetWidth * scaleFactor\n        // let h = page.offsetHeight * scaleFactor\n        var ctx = canvas.getContext('2d');\n        ctx.drawImage(image, 0, 0, canvas.width, canvas.height);\n        pageCanvas.appendChild(canvas);\n    };\n    image.src = imgUrl;\n}\nexports.embedCANVAS = embedCANVAS;\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Comment = /** @class */ (function () {\n    function Comment(data) {\n        this.top = data.top;\n        this.left = data.left;\n        this.text = data.text;\n        this.pageNum = data.pageNum;\n        this.scrollPos = data.scrollPos;\n        this.viewportDimension = data.viewportDimension;\n        this.author = data.author;\n    }\n    Comment.prototype.render = function () {\n        this.nativeElement = document.createElement('div');\n        this.nativeElement.setAttribute('class', 'crocodoc-comment');\n        this.nativeElement.innerHTML = \"<div class=\\\"crocodoc-comment-underline\\\"></div>\\n            <div class=\\\"crocodoc-comment-text\\\"><div class=\\\"crocodoc-comment-text-inner\\\">\" + this.text + \"</div></div>\";\n        return this;\n    };\n    Comment.prototype.appendTo = function (page, newViewportWidth) {\n        page.nativeElement.appendChild(this.nativeElement);\n        // real positions can only be calculated when the element is effecitvely\n        // appended to the dom (because such values come from browser rendering btw)\n        var computedStyles = getComputedStyle(this.nativeElement);\n        // scale the comment top/left positions from stored values and possibly\n        // different viewport size (with width diff because height does not affect scaling\n        var scaledTopPos = (newViewportWidth * this.top) / this.viewportDimension.width;\n        var scaledLeftPos = (newViewportWidth * this.left) / this.viewportDimension.width;\n        // let topFix = 25;\n        // height and width only exist when the element exists in the DOM\n        this.nativeElement.style.top = (scaledTopPos + 28) + \"px\";\n        this.nativeElement.style.left = scaledLeftPos + \"px\";\n        return this;\n    };\n    Comment.prototype.removeFrom = function (page) {\n        this.nativeElement.remove();\n        return this;\n    };\n    Comment.prototype.serialize = function () {\n        return {\n            top: this.top,\n            left: this.left,\n            text: this.text,\n            pageNum: this.pageNum,\n            scrollPos: this.scrollPos,\n            viiewportDimension: this.viewportDimension,\n            author: this.author,\n        };\n    };\n    return Comment;\n}());\nexports.Comment = Comment;\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction cleanArray(actual) {\n    var newArray = new Array();\n    for (var i = 0; i < actual.length; i++) {\n        if (actual[i]) {\n            newArray.push(actual[i]);\n        }\n    }\n    return newArray;\n}\nfunction compare(a, b) {\n    var diff = (b - a);\n    if (diff > 5 && diff <= 10) {\n    }\n    return [a, b + 5];\n}\nfunction safariFix() {\n    var svgs = document.querySelectorAll('tspan');\n    for (var i = 0; i < svgs.length; i++) {\n        var svgElement = svgs[i];\n        var attr = svgElement.getAttribute('x');\n        if (null == attr) {\n            return;\n        }\n        var xAttrs = attr.split(' ').map(function (val) { return (val == '') ? null : parseFloat(val.trim()); });\n        // attrs = attrs.filter(val => { return val != '' })\n        if (xAttrs.length <= 1) {\n            continue;\n        }\n        var list = [];\n        for (var i_1 in xAttrs) {\n            var value = xAttrs[i_1];\n            if (parseInt(i_1) >= xAttrs.length) {\n                continue;\n            }\n            var nextValue = xAttrs[i_1 + 1];\n            xAttrs[i_1 + 1] = nextValue;\n            list.push(value);\n        }\n    }\n}\nexports.safariFix = safariFix;\n\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// paperview.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3df0fdb64917d4418704","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader/lib/css-base.js\n// module id = 0\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(selector) {\n\t\tif (typeof memo[selector] === \"undefined\") {\n\t\t\tvar styleTarget = fn.call(this, selector);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[selector] = styleTarget;\n\t\t}\n\t\treturn memo[selector]\n\t};\n})(function (target) {\n\treturn document.querySelector(target)\n});\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n\tif (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertInto + \" \" + options.insertAt.before);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\toptions.attrs.type = \"text/css\";\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\toptions.attrs.type = \"text/css\";\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = options.transform(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/style-loader/lib/addStyles.js\n// module id = 1\n// module chunks = 0","import { Size } from '../model/size.interface';\n\nexport function scale(viewport: Size, original: Size): number\n{\n    return viewport.width / original.width\n}\n\nexport function calc(floatVal: any, scale: number = 1)\n{\n    return Math.round((floatVal * scale))\n}\n\nexport function px(floatVal: any, scale: number = 1)\n{\n    return `${calc(floatVal, scale)}px`\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utility/scale.ts","declare var window: any;\ndeclare var ActiveXObject: any;\nlet xhrSupported = null, xhrCORSSupported = null;\n\nexport let getComputedStyle = (el) => {\n    if ('getComputedStyle' in window) {\n        return window.getComputedStyle(el);\n    }\n    // IE <= 8\n    return el.currentStyle;\n}\n\n\nexport let height = () => {\n    Math.max(document.documentElement.clientHeight, window.innerHeight || 0)\n}\nexport let width = () => {\n    Math.max(document.documentElement.clientWidth, window.innerWidth || 0)\n}\n\nexport let support: any = {\n    /**\n     * Return true if XHR is supported\n     * @returns {boolean}\n     */\n    isXHRSupported: () => {\n        if (xhrSupported === null) {\n            xhrSupported = !!this.getXHR();\n        }\n        return xhrSupported;\n    },\n\n    /**\n     * Return true if XHR is supported and is CORS-enabled\n     * @returns {boolean}\n     */\n    isCORSSupported: () => {\n        if (xhrCORSSupported === null) {\n            xhrCORSSupported = this.isXHRSupported() &&\n                               ('withCredentials' in this.getXHR());\n        }\n        return xhrCORSSupported;\n    },\n\n    /**\n     * Return true if XDR is supported\n     * @returns {boolean}\n     */\n    isXDRSupported: () => {\n        return typeof window.XDomainRequest !== 'undefined';\n    },\n\n    /**\n     * Get a XHR object\n     * @returns {XMLHttpRequest} An XHR object\n     */\n    getXHR: () => {\n        if (window.XMLHttpRequest) {\n            return new window.XMLHttpRequest();\n        } else {\n            try {\n                return new ActiveXObject('MSXML2.XMLHTTP.3.0');\n            }\n            catch(ex) {\n                return null;\n            }\n        }\n    },\n\n    /**\n     * Get a CORS-enabled request object\n     * @returns {XMLHttpRequest|XDomainRequest} The request object\n     */\n    getXDR: () => {\n        if (this.isXDRSupported()) {\n            return new window.XDomainRequest();\n        }\n        return null;\n    },\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utility/support.ts","type SizeTuple = {\n    width: number;\n    height: number;\n}\n\nconst DEFAULT_ZOOM: number = 1.0;\nlet ZOOM: number = 1.0;\nlet ORIGINAL_SIZE: SizeTuple;\n\nexport function zoomSize(tuple: SizeTuple, scale: number): SizeTuple\n{\n    return { width: (tuple.width * scale), height: tuple.height * scale }\n}\n\nexport function zoomInOrOut(viewer: any, zoomCoef: number)\n{\n    // ZOOM = Math.round(ZOOM * zoomCoef)\n\n    // let originalSize = viewer.getDocHeight()\n    if (zoomCoef === 1) {\n        // @TODO Not finding satisfiying solution to rever to default zoom\n        // revert to original zoom level (coef = 1)\n    }\n\n    for (let i in viewer.pages) {\n\n        let width = parseInt(viewer.pages[i].width) * zoomCoef\n        let height = parseInt(viewer.pages[i].height) * zoomCoef\n\n        viewer.pages[i].width = Math.round(width)\n        viewer.pages[i].height = Math.round(height)\n        viewer.pages[i].nativeElement.width = `${Math.round(width)}px`\n        viewer.pages[i].nativeElement.height = `${Math.round(height)}px`\n\n        // @TODO Tried to adjust scroll when zoom is modified\n        // but this does not yield satisfing results\n        // let heightDiff = originalHeight - Math.round(originalHeight * zoomCoef)\n        // height diff will automatically be negative when zoomed\n        // if (zoomCoef < 1) {\n        //     viewer.scrollBy(-100 * zoomCoef)\n        // } else if (zoomCoef > 1) {\n        //     viewer.scrollBy(100)\n        // }\n    }\n}\n\nexport function updateToolbar(currentPage: number)\n{\n    let element: any = document.getElementById('crocodoc-toolbar-pages')\n    \n    if (element) {\n        element.innerText = `${currentPage}`\n    }\n}\n\nexport function embedToolbar(viewer: any)\n{\n    let element = document.createElement('div')\n    element.setAttribute('class', 'crocodoc-toolbar')\n\n    if (element == null)  {\n        return;\n    }\n\n    element.innerHTML = `<div class=\"crocodoc-toolbar\">\n        <div class=\"crocodoc-toolbar-inner\">\n            <a class=\"crocodoc-toolbar-element\" href=\"\" id=\"crodococ-btn-zoom-in\">In</a>\n            <a class=\"crocodoc-toolbar-element\" href=\"\" id=\"crodococ-btn-zoom-out\">Out</a>\n            <a class=\"crocodoc-toolbar-element\" href=\"\" id=\"crodococ-btn-zoom-fit\">Fit</a>\n            <span id=\"crocodoc-toolbar-pages\" class=\"crocodoc-toolbar-element crocodoc-toolbar-pages\"></span>\n        </div>\n    </div>`;\n\n    document.body.appendChild(element)\n\n    let zoomInBtn = document.getElementById('crodococ-btn-zoom-in')\n    let zoomOutBtn = document.getElementById('crodococ-btn-zoom-out')\n    let zoomFitBtn = document.getElementById('crodococ-btn-zoom-fit')\n\n    // ORIGINAL_SIZE.width = parseInt(viewer.pages[0].style.width)\n    // ORIGINAL_SIZE.height = parseInt(viewer.pages[0].style.height)\n\n    zoomInBtn.onclick = (e) => {\n        e.preventDefault()\n        e.stopPropagation()\n        zoomInOrOut(viewer, DEFAULT_ZOOM + 0.15)\n    }\n\n    zoomOutBtn.onclick = (e) => {\n        e.preventDefault()\n        e.stopPropagation()\n        zoomInOrOut(viewer, DEFAULT_ZOOM - 0.15)\n    }\n\n    zoomFitBtn.onclick = (e) => {\n        e.preventDefault()\n        e.stopPropagation()\n        zoomInOrOut(viewer, DEFAULT_ZOOM)\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utility/embed-toolbar.ts","/**\n * @author Romain BRUCKERT\n * https://github.com/adadgio/paperview-js\n */\nexport * from './viewer';\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","declare var lightrange: any;\nimport './scss/viewer.scss';\nimport './scss/toolbar.scss';\nimport './scss/comment.scss';\nimport './scss/animations.scss';\n\nimport { px, scale }        from './utility/scale';\nimport { support }          from './utility/support';\nimport { width, height }    from './utility/support';\nimport { getComputedStyle } from './utility/support';\nimport { both }             from './utility/both';\nimport { fetchURL }         from './utility/fetch';\nimport { fetchSVG }         from './utility/fetch-svg';\nimport { fetchPNG }         from './utility/fetch-png';\nimport { fetchTEXT }        from './utility/fetch-text';\nimport { embedText }        from './utility/embed-text';\nimport { embedToolbar }     from './utility/embed-toolbar';\nimport { updateToolbar }    from './utility/embed-toolbar';\nimport { commentEditor }    from './utility/comment-editor';\nimport { Mouse }            from './utility/mouse';\n\nimport { Page, Comment  }   from './model';\nimport { safariFix }        from './safari.fix';\n\nexport class PaperView\n{\n    options: any = {};\n    loaded: boolean = false;\n    safariFix: Function;\n\n    container: HTMLElement;     // usually #viewer\n    viewport: HTMLElement;      // usually .crocodoc-viewport\n    doc: HTMLElement;           // usually .crocodoc.doc\n    pages: Array<Page> = []\n    comments: Array<Comment> = []\n\n    DOC_DIM: any = { width: 0, height: 0 }\n    VIEWPORT_DIM: any = { width: 0, height: 0 }\n    VIEWPORT_DIM_FORCED: boolean = false\n\n    VERSION: string = '1.0.5';\n    SCROLL_NEXT: string = 'next';\n    SCROLL_PREVIOUS: string = 'previous';\n    ZOOM_FIT_WIDTH: string = 'fitwidth';\n\n    listeners: any = { ready: () => {} }\n\n    constructor()\n    {\n        this.safariFix = safariFix\n    }\n\n    // helper to fix Android window height/width on mobile browsers\n    // https://stackoverflow.com/questions/10610743/android-browsers-screen-width-screen-height-window-innerwidth-window-inner\n    forceViewerSize(width: number, height: number)\n    {\n        this.VIEWPORT_DIM_FORCED = true\n        this.VIEWPORT_DIM.width = width\n        this.VIEWPORT_DIM.height = height\n\n        return this\n    }\n\n    createViewer(selector: string, opts?: any)\n    {\n        this.options = opts;\n        this.options.url = opts.url.replace(/\\/$/, '')\n        this.container = document.getElementById(selector.replace('#', ''))\n\n        this.options.mode = (typeof opts.mode !== 'undefined') ? opts.mode : 'svg';\n        this.options.comments = (typeof opts.comments !== 'undefined') ? both(opts.comments, { view: true, edit: true }) : { view: true, edit: true }\n        this.options.svgFetchMode = (typeof opts.svgFetchMode === 'undefined') ? 'response/document' : opts.svgFetchMode;\n        this.options.toolbar = (typeof opts.toolbar === 'undefined') ? false : opts.toolbar;\n        this.options.debug = (typeof opts.debug === 'undefined') ? false : opts.debug;\n\n        this.viewport = document.createElement('div')\n        this.doc = document.createElement('div')\n\n        this.viewport.setAttribute('id', 'crocodoc-viewport')\n        this.viewport.setAttribute('class', 'crocodoc-viewport')\n        this.doc.setAttribute('class', 'crocodoc-doc')\n\n        this.container.appendChild(this.viewport)\n        this.viewport.appendChild(this.doc)\n\n        // temp debug\n        if (true === this.options.debug) {\n            const debugElement = document.createElement('div')\n            debugElement.setAttribute('class', 'debug')\n            debugElement.innerHTML = `paperview-js v${this.VERSION} <span id=\"scroll-pos\"></span>`;\n            this.container.appendChild(debugElement)\n        }\n\n        if (!this.VIEWPORT_DIM_FORCED) {\n            this.VIEWPORT_DIM.width = this.viewport.offsetWidth\n            this.VIEWPORT_DIM.height = this.viewport.offsetHeight\n        }\n\n        return this;\n    }\n\n    load(): void\n    {\n        let imgsFetched: Array<Promise<SVGSVGElement|string>> = []\n        let textsLoaded: Array<Promise<any>> = []\n\n        fetchURL(`${this.options.url}/info.json`, 'json').then(info => {\n\n            let scaling = scale(this.VIEWPORT_DIM, info.dimensions)\n\n            // create requests for each pages (svg + text elements)\n            for (var i = 0; i < info.numpages; i++) {\n                this.pages.push(new Page(info.dimensions, scaling))\n\n                if (this.options.mode === 'svg') {\n                    imgsFetched.push(fetchSVG(`${this.options.url}/page-${i+1}.svg`, this.options.svgFetchMode))\n                }  else if (this.options.mode === 'canvas' || this.options.mode === 'png') {\n\n                    let url = `${this.options.url}/page-${i+1}.png`\n                    imgsFetched.push(Promise.resolve(url))\n                }\n\n                // @TODO uncomment to load dirty text layer\n                // textsLoaded.push(fetchTEXT(`${this.options.url}/text-${i+1}.html`))\n            }\n\n            // @TODO uncomment to render dirty text layer\n            // Promise.all(textsLoaded).then(res => {\n            //     for (var i=0; i < info.numpages; i++) {\n            //         const bodyElement: HTMLElement = res[i]\n            //         const html = bodyElement.innerHTML;\n            //         const page: HTMLElement = this.pages[i]\n            //\n            //         embedText(page, html)\n            //     }\n            // })\n\n            Promise.all(imgsFetched).then((imgDocs: Array<SVGSVGElement|string>) => {\n\n                for (var i=0; i < info.numpages; i++) {\n                    const page = this.pages[i]\n                    page.render(imgDocs[i], i, this.options.mode).appendTo(this.doc)\n                }\n\n                this.loaded = true\n\n                // set sizes only when all pages are loaded\n                this.DOC_DIM.width = this.getDocWidth()\n                this.DOC_DIM.height = this.getDocHeight()\n\n                if (typeof this.listeners['ready'] === 'function') {\n                    const event = { eventName: 'ready', numPages: this.pages.length, dimensions: {  viewportSize: this.VIEWPORT_DIM, docSize: this.DOC_DIM } }\n                    this.listeners['ready'](event)\n                }\n\n                // attach scroll event\n                this.viewport.onscroll = (e) => {\n                    if (typeof this.listeners['scroll'] === 'function') {\n\n                        const scrollPos = this.getScrollPos()\n                        const currPageNum = this.getCurrentPageNum()\n\n                        // show current page and other info in toolbar\n                        if (this.options.toolbar) {\n\n                            document.getElementById('scroll-pos').innerText = `${scrollPos}`\n                            updateToolbar(currPageNum)\n                        }\n\n                        const event = { eventName: 'scroll', scrollTop: scrollPos, numPages: this.pages.length, currentPage: currPageNum }\n                        this.listeners['scroll'](event)\n                    }\n                }\n\n                if (true === this.options.comments.view) {\n                    this.loadComments()\n                }\n                if (true === this.options.comments.edit) {\n                    this.enableComments()\n                }\n                // display the bottom toolbar when document is loaded\n                if (true === this.options.toolbar) {\n                    embedToolbar(this)\n                }\n\n            }).catch(error => { console.log(error) })\n        })\n    }\n\n    loadComments()\n    {\n        fetchURL(`${this.options.url}/comments.json`, 'json').then((comments: Array<Comment>) => {\n            comments = (null === comments) ? [] : comments\n            this.comments = comments.map(data => new Comment(data))\n            this.renderComments()\n        })\n    }\n\n    renderComments()\n    {\n        for (let i in this.comments) {\n            const page = this.pages[this.comments[i].pageNum]\n            this.comments[i].render().appendTo(page, this.VIEWPORT_DIM.width)\n        }\n    }\n\n    getDocHeight()\n    {\n        if (!this.loaded) {\n            console.warn(`All pages are not loaded yet and you are calling ::getDocHeight before: height value could be flawed.`)\n        }\n\n        return this.doc.offsetHeight\n    }\n\n    getDocWidth()\n    {\n        if (!this.loaded) {\n            console.warn(`All pages are not loaded yet and you are calling ::getDocWidth before: width value could be flawed.`)\n        }\n\n        return this.doc.offsetWidth\n    }\n\n    getScrollPos()\n    {\n        return this.viewport.scrollTop\n    }\n\n    getPageOffset(pageNum: number)\n    {\n        return this.pages[pageNum - 1].offsetTop(pageNum)\n    }\n\n    getCurrentPageNum()\n    {\n        const scrollPos = this.getScrollPos()\n\n        // page num would be the page currently at 2/3 of viewport\n        const scrollPosFixed = scrollPos + (this.VIEWPORT_DIM.height * 0.666)\n\n        let pageNum = 0;\n        let pagesTotalHeight = 0;\n\n        for (let i in this.pages) {\n            pagesTotalHeight += this.pages[i].height\n\n            if (scrollPosFixed >= pagesTotalHeight) {\n                pageNum++;\n            }\n        }\n\n        return pageNum;\n    }\n\n    scrollTo(pixels: number|string)\n    {\n        pixels = (typeof pixels === 'string') ? parseInt(pixels) : pixels\n        this.viewport.scrollTop = pixels\n        return this\n    }\n\n    scrollToPage(number: number)\n    {\n        let pixels: number = this.getPageTopDistFromTop(number);\n\n        if (null !== pixels) {\n            this.scrollTo(pixels)\n        } else {\n            console.warn(`::scrollToPage() Cannot scroll because this page number does not exist)`)\n        }\n\n        return this\n    }\n\n    scrollTop()\n    {\n        this.viewport.scrollTop = 0\n\n        return this\n    }\n\n    scrollBy(pixels: number|string)\n    {\n        pixels = (typeof pixels === 'string') ? parseInt(pixels) : pixels\n        this.viewport.scrollTop += pixels\n        return this\n    }\n\n    on(eventName: string, callback: Function)\n    {\n        this.listeners[eventName] = callback\n\n        return this\n    }\n\n    addPlugin(name: string): void\n    {\n\n    }\n\n    private getPageDistFromTop(number: number)\n    {\n        let pixels: number = 0;\n        let scrollTop = this.viewport.scrollTop;\n\n\n        for (let i in this.pages) {\n            let index = parseInt(i)\n\n            let pageHeight = this.pages[i].height;\n            // pixels +=\n            // @TODO\n            // if ((index === number)) {\n            //\n            // }\n        }\n\n        return null;\n    }\n\n    private getPageTopDistFromTop(number: number)\n    {\n        let pixels: number = 0;\n\n        for (let i in this.pages) {\n\n            if ((parseInt(i) + 1) === number) {\n                return pixels;\n            }\n\n            pixels += this.pages[i].height;\n        }\n\n        return pixels;\n    }\n\n    private enableComments()\n    {\n        commentEditor().onSave((comment: Comment) => {\n            this.comments.push(comment)\n            this.renderComments()\n        })\n\n        Mouse.enable().up((e, coords) => {\n\n            commentEditor().hide()\n\n            let selection = lightrange.getSelectionInfo()\n\n            let currPageNum = this.getCurrentPageNum()\n            // let pageTopDist = this.getPageDistFromTop(currPageNum)\n            // let topFromPage = selection.yStart + pageTopDist\n\n            // let selection = window.getSelection()\n            // let oRange = selection.getRangeAt(0) // get text range\n            // let oRect = oRange.getBoundingClientRect()\n            // let pageNum = this.getCurrentPageNum()\n            //\n            // let jsonComment: JsonComment = {\n            //     pageNum: pageNum,\n            //     top: oRect.top,\n            //     left: oRect.left,\n            //     text: selection.toString(),\n            //     scrollPos: this.getScrollPos(),\n            //     viewportDimension: this.VIEWPORT_DIM,\n            // }\n\n            if (selection.characters === 0) {\n                return;\n            }\n            // let realPageSelected = e.target;\n\n            // let comment: Comment = new Comment({\n            //     pageNum: currPageNum,\n            //     top: topFromPage,\n            //     left: selection.xStart,\n            //     text: selection.text,\n            //     scrollPos: this.getScrollPos(),\n            //     viewportDimension: this.VIEWPORT_DIM,\n            // })\n\n            // commentEditor().show(comment, coords)\n        })\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/viewer.ts","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./viewer.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./viewer.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./viewer.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/scss/viewer.scss\n// module id = 7\n// module chunks = 0","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"*, html, body {\\n  touch-action: manipulation !important; }\\n\\n.crocodoc-viewport {\\n  margin: 0;\\n  padding: 0;\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  bottom: 0;\\n  left: 0;\\n  height: 100%;\\n  width: 100%;\\n  overflow: auto;\\n  -webkit-overflow-scrolling: touch; }\\n\\n.crocodoc-doc {\\n  width: auto;\\n  overflow: hidden;\\n  position: relative;\\n  text-align: center;\\n  font-size: 100%;\\n  background-color: #f3f3f3; }\\n  .crocodoc-doc.crocodoc-doc-background-gray {\\n    background-color: #f3f3f3; }\\n\\n.crocodoc-page-custom {\\n  position: relative;\\n  background-color: #fff;\\n  margin-left: auto;\\n  margin-right: auto;\\n  -webkit-user-select: none;\\n  -moz-user-select: none;\\n  -ms-user-select: none;\\n  user-select: none; }\\n\\n.crocodoc-page-svg-custom,\\n.crocodoc-page-text-customn\\n.crocodoc-page-canvas-custom {\\n  width: 100%;\\n  height: 100%;\\n  position: absolute; }\\n\\n.crocodoc-page-text-custom .textLayer {\\n  height: 100%;\\n  position: absolute;\\n  width: 100% !important;\\n  height: 100% !important; }\\n  .crocodoc-page-text-custom .textLayer > div {\\n    position: absolute; }\\n\\n.debug {\\n  position: fixed;\\n  bottom: 0;\\n  right: 0;\\n  background: #FFF8DC;\\n  padding: 8px;\\n  color: #5a5a5a;\\n  font-family: Arial, sans-serif;\\n  font-size: 12px; }\\n\\n.line1 {\\n  position: absolute;\\n  width: 1px;\\n  top: 0px;\\n  left: 203px;\\n  height: 251px;\\n  z-index: 99; }\\n\\n.line2 {\\n  position: absolute;\\n  background: green;\\n  width: 1px;\\n  top: 0px;\\n  left: 208px;\\n  height: 251px;\\n  z-index: 100; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/sass-loader/lib/loader.js!./src/scss/viewer.scss\n// module id = 8\n// module chunks = 0","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/style-loader/lib/urls.js\n// module id = 9\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./toolbar.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./toolbar.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./toolbar.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/scss/toolbar.scss\n// module id = 10\n// module chunks = 0","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".crocodoc-toolbar {\\n  position: fixed;\\n  bottom: 16px;\\n  right: 16px;\\n  background-color: #333;\\n  border-radius: 3px;\\n  -moz-border-radius: 3px;\\n  -webkit-border-radius: 3px;\\n  font-size: 14px;\\n  font-family: Arial, sans-serif;\\n  -webkit-font-smoothing: antialiased;\\n  -moz-osx-font-smoothing: grayscale; }\\n  .crocodoc-toolbar .crocodoc-toolbar-inner {\\n    position: relative;\\n    display: flex;\\n    flex-direction: row;\\n    align-items: center;\\n    color: #f9f9f9;\\n    padding: 16px 8px; }\\n    .crocodoc-toolbar .crocodoc-toolbar-inner a {\\n      color: inherit;\\n      text-decoration: none; }\\n    .crocodoc-toolbar .crocodoc-toolbar-inner .crocodoc-toolbar-element {\\n      display: flex;\\n      flex-direction: row;\\n      align-items: center;\\n      padding-left: 8px;\\n      padding-left: 8px; }\\n\\n.ico {\\n  max-width: 256px;\\n  max-height: 256px; }\\n\\n.ico.ico-zoom-in {\\n  color: white;\\n  width: 20px;\\n  height: 20px;\\n  font-size: 16px;\\n  background-image: url(\\\"data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUyLjk2NiA1Mi45NjYiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUyLjk2NiA1Mi45NjY7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iMjRweCIgaGVpZ2h0PSIyNHB4Ij4KPGc+Cgk8cGF0aCBkPSJNMjguOTgzLDIwaC02di02YzAtMC41NTItMC40NDgtMS0xLTFzLTEsMC40NDgtMSwxdjZoLTZjLTAuNTUyLDAtMSwwLjQ0OC0xLDFzMC40NDgsMSwxLDFoNnY2YzAsMC41NTIsMC40NDgsMSwxLDEgICBzMS0wLjQ0OCwxLTF2LTZoNmMwLjU1MiwwLDEtMC40NDgsMS0xUzI5LjUzNSwyMCwyOC45ODMsMjB6IiBmaWxsPSIjMDAwMDAwIi8+Cgk8cGF0aCBkPSJNNTEuNzA0LDUxLjI3M0wzNi44NDUsMzUuODJjMy43OS0zLjgwMSw2LjEzOC05LjA0MSw2LjEzOC0xNC44MmMwLTExLjU4LTkuNDItMjEtMjEtMjFzLTIxLDkuNDItMjEsMjFzOS40MiwyMSwyMSwyMSAgIGM1LjA4MywwLDkuNzQ4LTEuODE3LDEzLjM4NC00LjgzMmwxNC44OTUsMTUuNDkxYzAuMTk2LDAuMjA1LDAuNDU4LDAuMzA3LDAuNzIxLDAuMzA3YzAuMjUsMCwwLjQ5OS0wLjA5MywwLjY5My0wLjI3OSAgIEM1Mi4wNzQsNTIuMzA0LDUyLjA4Niw1MS42NzEsNTEuNzA0LDUxLjI3M3ogTTIuOTgzLDIxYzAtMTAuNDc3LDguNTIzLTE5LDE5LTE5czE5LDguNTIzLDE5LDE5cy04LjUyMywxOS0xOSwxOSAgIFMyLjk4MywzMS40NzcsMi45ODMsMjF6IiBmaWxsPSIjMDAwMDAwIi8+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPC9zdmc+Cg==\\\"); }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/sass-loader/lib/loader.js!./src/scss/toolbar.scss\n// module id = 11\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./comment.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./comment.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./comment.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/scss/comment.scss\n// module id = 12\n// module chunks = 0","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".crocodoc-doc .crocodoc-page-custom {\\n  position: relative; }\\n  .crocodoc-doc .crocodoc-page-custom .crocodoc-comment {\\n    position: absolute;\\n    width: auto;\\n    font-size: 14px;\\n    font-family: Arial, sans-serif;\\n    opacity: 0.9;\\n    border-radius: 2px;\\n    -moz-border-radius: 2px;\\n    -webkit-border-radius: 2px;\\n    -webkit-font-smoothing: antialiased;\\n    -moz-osx-font-smoothing: grayscale;\\n    margin-top: -6px; }\\n    .crocodoc-doc .crocodoc-page-custom .crocodoc-comment.visible {\\n      display: block; }\\n    .crocodoc-doc .crocodoc-page-custom .crocodoc-comment.hidden {\\n      display: none; }\\n    .crocodoc-doc .crocodoc-page-custom .crocodoc-comment .crocodoc-comment-underline {\\n      position: absolute;\\n      width: 100%;\\n      height: 1px;\\n      border-top: 2px dashed red; }\\n    .crocodoc-doc .crocodoc-page-custom .crocodoc-comment .crocodoc-comment-text {\\n      color: #f5f5f5;\\n      background-color: #333;\\n      margin-top: 8px; }\\n      .crocodoc-doc .crocodoc-page-custom .crocodoc-comment .crocodoc-comment-text .crocodoc-comment-text-inner {\\n        line-height: 1.6em;\\n        max-width: 460px;\\n        word-wrap: break-word;\\n        padding: 4px 8px; }\\n\\n.crocodoc-comment-editor {\\n  position: fixed;\\n  color: #333;\\n  border: 1px solid #e0e0e0;\\n  box-shadow: 0px 0px 8px #e4e4e4;\\n  background-color: #fff;\\n  font-size: 14px;\\n  font-family: Arial, sans-serif;\\n  z-index: 99;\\n  -webkit-font-smoothing: antialiased;\\n  -moz-osx-font-smoothing: grayscale;\\n  border-radius: 3px;\\n  -moz-border-radius: 3px;\\n  -webkit-border-radius: 3px; }\\n  .crocodoc-comment-editor .crocodoc-comment-editor-inner {\\n    display: flex;\\n    flex-direction: column;\\n    padding: 16px 24px; }\\n    .crocodoc-comment-editor .crocodoc-comment-editor-inner label {\\n      color: gray;\\n      margin-bottom: 8px; }\\n    .crocodoc-comment-editor .crocodoc-comment-editor-inner textarea {\\n      color: inherit;\\n      font-size: inherit;\\n      font-family: inherit;\\n      padding: 8px;\\n      background: #fbfbfb;\\n      border: 1px solid #e0e0e0;\\n      margin-bottom: 8px; }\\n      .crocodoc-comment-editor .crocodoc-comment-editor-inner textarea:focus {\\n        outline: none; }\\n    .crocodoc-comment-editor .crocodoc-comment-editor-inner button {\\n      cursor: pointer;\\n      color: #fff;\\n      font-size: inherit;\\n      font-family: inherit;\\n      border: none;\\n      padding: 8px;\\n      background-color: #2663c1;\\n      border-radius: 2px;\\n      -moz-border-radius: 2px;\\n      -webkit-border-radius: 2px;\\n      outline: none;\\n      animation: background-color 0.3s ease; }\\n      .crocodoc-comment-editor .crocodoc-comment-editor-inner button:hover {\\n        background-color: #3574d6; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/sass-loader/lib/loader.js!./src/scss/comment.scss\n// module id = 13\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./animations.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./animations.scss\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/lib/loader.js!./animations.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/scss/animations.scss\n// module id = 14\n// module chunks = 0","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"@keyframes fadeIn {\\n  from {\\n    opacity: 0; }\\n  to {\\n    opacity: 1; } }\\n\\n@keyframes fadeOut {\\n  from {\\n    opacity: 1; }\\n  to {\\n    opacity: 0; } }\\n\\n.fade-in {\\n  animation: fadeIn .20s forwards; }\\n\\n.fade-out {\\n  animation: fadeOut .20s forwards; }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/sass-loader/lib/loader.js!./src/scss/animations.scss\n// module id = 15\n// module chunks = 0","export function both(value: any, fallbacks: any)\n{\n    let result: any = fallbacks;\n    \n    if (typeof value === 'boolean') {\n        for (let prop of Object.keys(fallbacks)) {\n            result[prop] = value;\n        }\n    } else if (typeof value === 'object') {\n        result = value\n    }\n\n    return result\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utility/both.ts","import { support } from './support';\n\nexport function fetchURL(url: string, type: string = 'text', handler: Function = () => {}): Promise<any>\n{\n    return new Promise((resolve, reject) => {\n        let xhr = support.getXHR()\n\n        xhr.responseType = type;    //'arraybuffer|string'. seel also https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/responseType\n        xhr.open('GET', url, true)  // let true be async request\n\n        xhr.onreadystatechange = function () {\n            if (xhr.readyState == 4) {\n                let status = xhr.status;\n\n                // remove the onreadystatechange handler,\n                // because it could be called again\n                // @NOTE: we replace it with a noop function, because\n                // IE8 will throw an error if the value is not of type\n                // 'function' when using ActiveXObject\n                xhr.onreadystatechange = function () {};\n\n                // status is 0 for successful local file requests, so assume 200\n                if (status === 0) {\n                    status = 200;\n                }\n\n                if (status < 500) {\n                    if (status !== 200)  {\n                        console.warn(`fetchURL() Resolved to ${status}`)\n                    }\n                    resolve(xhr.response)\n                } else {\n                    reject(xhr)\n                }\n            }\n        }\n\n        // this needs to be after the open call and before the send call\n        xhr.withCredentials = true;\n        xhr.send()\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utility/fetch.ts","import { support } from './support';\n\nexport function fetchSVG(url: string, handler: Function = () => {}, responseType: 'type/text'|'type/document' = 'type/document'): Promise<SVGSVGElement>\n{\n    function newSVGElement(svgStr: string) {\n        // const SVG_CONTAINER_TEMPLATE = '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"><script><![CDATA[('+PROXY_SVG+')()]]></script></svg>'\n        let placeholder = document.createElement('div')\n        placeholder.innerHTML = svgStr;\n        let svgElement = placeholder.firstChild\n\n        return svgElement\n    }\n\n    return new Promise((resolve, reject) => {\n        let xhr = support.getXHR()\n\n        if (responseType === 'type/document') {\n            xhr.responseType = 'document';\n        } else if (responseType === 'type/text')  {\n            xhr.responseType = 'text';\n        }\n\n        // xhr.respectType = 'application/json;charset:utf-8'\n        xhr.overrideMimeType('image/svg+xml')\n        xhr.open('GET', url, true)\n\n        xhr.onreadystatechange = function() {\n            if (xhr.readyState == 4) {\n                let status = xhr.status;\n\n                // remove the onreadystatechange handler,\n                // because it could be called again\n                // @NOTE: we replace it with a noop function, because\n                // IE8 will throw an error if the value is not of type\n                // 'function' when using ActiveXObject\n                xhr.onreadystatechange = function(){}\n\n                // status is 0 for successful local file requests, so assume 200\n                if (status === 0) {\n                    status = 200;\n                }\n                \n                if (status === 200) {\n\n                    if (responseType === 'type/document') {\n                        resolve(xhr.responseXML.documentElement)\n\n                    } else if (responseType === 'type/text')  {\n\n                        // let svgText = encodeURIComponent(xhr.responseText)\n                        let svgText = xhr.responseText\n\n                        svgText = svgText.replace(/&#x2019;/g, \"'\")\n                        svgText = svgText.replace(/&#xe002;/g, ' ')\n                        let svgDoc: any = newSVGElement(svgText)\n                        resolve(svgDoc)\n                    }\n\n\n                } else {\n                    reject(xhr)\n                }\n            }\n        }\n\n        // this needs to be after the open call and before the send call\n        xhr.withCredentials = true;\n        xhr.send()\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utility/fetch-svg.ts","import { browser }              from './browser';\nimport { template }             from './template';\nimport { Comment }              from '../model';\nimport { Mouse, MouseCoords }   from './mouse';\n\nlet onSaved: Function = () => {}\nconst EDITOR_ID = 'crocodoc-comment-editor'\n\nfunction show(comment: Comment, coords?: MouseCoords)\n{\n    let editor = document.createElement('div')\n    editor.setAttribute('id', EDITOR_ID)\n    editor.setAttribute('class', 'crocodoc-comment-editor fade-in')\n\n    editor.innerHTML = `<div class=\"crocodoc-comment-editor-inner\">\n        <label>Comment on this</label>\n        <textarea cols=\"28\" rows=\"4\" name=\"crodocodoc_comment_text\"></textarea>\n        <button id=\"crocodoc-comment-save-btn\">Save</button>\n    </div>`;\n\n    document.body.appendChild(editor)\n\n    // place the comment editor next to the mouse\n    if (coords) {\n        editor.style.top = `${coords.y}px`\n        editor.style.left = `${coords.x}px`\n    }\n\n    // prevent mousedown events to bubble up to the dom otherwise\n    // editor gets hidden again as soon as the  mouse goes up when you\n    // are trying to fill in the textarea or click on the button\n    editor.onmouseup = (e) => {\n        e.stopPropagation()\n    }\n\n    let button = document.getElementById('crocodoc-comment-save-btn')\n    let textarea = document.getElementsByName('crodocodoc_comment_text')[0] as HTMLTextAreaElement\n\n    // textarea.onfocus = (e) => {\n    //     e.preventDefault()\n    // }\n\n    button.onclick = (e) => {\n        e.preventDefault()\n        comment.text = textarea.value\n        onSaved(comment)\n    }\n}\n\nfunction hide()\n{\n    let editor = document.getElementById(EDITOR_ID)\n\n    if (editor) {\n        editor.setAttribute('class', 'crocodoc-comment-editor fade-out')\n        document.body.removeChild(editor)\n    }\n}\n\nfunction onSave(then: Function)\n{\n    onSaved = then;\n}\n\nexport function commentEditor()\n{\n    return {\n        show: show,\n        hide: hide,\n        onSave: onSave\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utility/comment-editor.ts","export type MouseCoords = {\n    x: number;\n    y: number;\n}\n\nclass MouseClass\n{\n    coordinates: MouseCoords = { x: null, y: null }\n\n    enable()\n    {\n        document.onmousemove = (e) => {\n            this.coordinates = { x: e.pageX, y: e.pageY }\n        }\n\n        return this\n    }\n    \n    up(then: Function)\n    {\n        document.onmouseup = (e) => {\n            then(e, this.getCoords())\n        }\n    }\n\n    getCoords(): MouseCoords\n    {\n        return this.coordinates;\n    }\n}\n\nexport let Mouse = new MouseClass()\n\n\n\n// WEBPACK FOOTER //\n// ./src/utility/mouse.ts","export * from './page.model';\nexport * from './comment.model';\n\n\n\n// WEBPACK FOOTER //\n// ./src/model/index.ts","import { calc }         from '../utility/scale';\nimport { embedSVG }     from '../utility/embed-svg';\nimport { embedCANVAS }  from '../utility/embed-canvas';\nimport { Size }         from './size.interface';\n\nexport class Page\n{\n    private baseWidth: number;\n    private baseHeight: number;\n    private scale: number = 1;\n\n    public width: number;\n    public height: number;\n    public nativeElement: HTMLElement;\n\n    constructor(size: Size, scale: number = 1)\n    {\n        this.scale = scale\n        this.baseWidth = size.width\n        this.baseHeight = size.height\n    }\n\n    appendTo(doc: HTMLElement)\n    {\n        doc.appendChild(this.nativeElement)\n\n        return this\n    }\n\n    render(imgDoc: SVGSVGElement|any, index?: number, rendering: string = 'svg')\n    {\n        this.nativeElement = document.createElement('div')\n        this.nativeElement.setAttribute('class', 'crocodoc-page-custom')\n        this.nativeElement.setAttribute('data-index', `${index}`)\n\n        // scale the width and height according to scale\n        this.width = calc(this.baseWidth, this.scale)\n        this.height = calc(this.baseHeight, this.scale)\n\n        this.nativeElement.setAttribute('style', `width: ${this.width}px; height:${this.height}px`)\n\n        if (rendering === 'canvas') {\n            embedCANVAS(this.nativeElement, imgDoc)\n        } else if (rendering === 'svg') {\n            embedSVG(this.nativeElement, imgDoc)\n        }\n\n        return this\n    }\n\n    offsetTop(index: number|string)\n    {\n        index = (typeof index === 'string') ? parseInt(index) : index;\n        return ((index + 1) * this.height) - this.height\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/model/page.model.ts","declare var window: any;\nimport { browser }  from './browser';\nimport { template } from './template';\n\nexport function embedSVG(page: HTMLElement, svgDoc: SVGSVGElement)\n{\n    // let dataURLPrefix = 'data:image/svg+xml';\n    // let svgContainerTemplate = '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"></svg>'; // <script><![CDATA[('+PROXY_SVG+')()]]></script>\n    // let svgEl: any = document.createElement('svg')\n    // svgEl.src = svgDoc\n    \n    let pageSvg: HTMLElement = document.createElement('div')\n    pageSvg.setAttribute('class', 'crocodoc-page-svg-custom')\n\n    // scale the svg image to fit the page container\n    // viewBox=\"0 0 800 1136.38722716249\"\n    svgDoc.setAttribute('preserveAspectRatio', 'xMinYMin slice') // slice|meet\n    // svgDoc.setAttribute('width', `${page.offsetWidth}px`)\n    // svgDoc.setAttribute('height', `${page.offsetHeight}px`)\n    svgDoc.setAttribute('width', `100%`)\n    svgDoc.setAttribute('height', `100%`)\n    // svgDoc.setAttribute('viewBox', `0 0 ${page.offsetWidth} ${page.offsetHeight}`)\n\n    pageSvg.appendChild(svgDoc)\n    page.appendChild(pageSvg)\n}\n\n// case EMBED_STRATEGY_DATA_URL_IMG:\n//     svgEl = $svg[0];\n//     dataURLPrefix = 'data:' + SVG_MIME_TYPE;\n//     if (!browser.ie && window.btoa) {\n//         svgEl.src = dataURLPrefix + ';base64,' + window.btoa(svgText);\n//     } else {\n//         svgEl.src = dataURLPrefix + ',' + encodeURIComponent(svgText);\n//     }\n//     break;\n\n// var SVG_MIME_TYPE = 'image/svg+xml',\n//     HTML_TEMPLATE = '<style>html,body{width:100%;height:100%;margin:0;overflow:hidden;}</style>',\n//     SVG_CONTAINER_TEMPLATE = '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"><script><![CDATA[('+PROXY_SVG+')()]]></script></svg>',\n\n\n\n// WEBPACK FOOTER //\n// ./src/utility/embed-svg.ts","declare var window: any;\nimport { browser }  from './browser';\nimport { template } from './template';\n\nexport function embedCANVAS(page: HTMLElement, imgUrl: string)\n{\n    let pageCanvas: HTMLElement = document.createElement('div')\n    pageCanvas.setAttribute('class', 'crocodoc-page-canvas-custom')\n\n    page.appendChild(pageCanvas)\n\n    let image = new Image()\n    let canvas = document.createElement('canvas')\n\n    image.onload = () => {\n\n        let scaleFactor = 1.8\n        canvas.width = page.offsetWidth // / scaleFactor\n        canvas.height = page.offsetHeight // / scaleFactor\n\n        // let w = page.offsetWidth * scaleFactor\n        // let h = page.offsetHeight * scaleFactor\n\n        let ctx = canvas.getContext('2d')\n        ctx.drawImage(image, 0, 0, canvas.width , canvas.height)\n\n        pageCanvas.appendChild(canvas)\n    }\n\n    image.src = imgUrl\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utility/embed-canvas.ts","import { Page }             from './page.model';\nimport { embedComment }     from '../utility/embed-comment';\n\nexport class Comment\n{\n    top: number;\n    left: number;\n    text: string;\n    pageNum: number;\n    scrollPos: number;\n    viewportDimension: any;\n    author?: any;\n\n    nativeElement: HTMLElement;\n\n    constructor(data: any)\n    {\n        this.top = data.top\n        this.left = data.left\n        this.text = data.text\n        this.pageNum = data.pageNum\n        this.scrollPos = data.scrollPos\n        this.viewportDimension = data.viewportDimension\n        this.author = data.author\n    }\n\n    render()\n    {\n        this.nativeElement = document.createElement('div')\n        this.nativeElement.setAttribute('class', 'crocodoc-comment')\n        this.nativeElement.innerHTML = `<div class=\"crocodoc-comment-underline\"></div>\n            <div class=\"crocodoc-comment-text\"><div class=\"crocodoc-comment-text-inner\">${this.text}</div></div>`\n\n        return this\n    }\n\n    appendTo(page: Page, newViewportWidth: number)\n    {\n        page.nativeElement.appendChild(this.nativeElement)\n\n        // real positions can only be calculated when the element is effecitvely\n        // appended to the dom (because such values come from browser rendering btw)\n        const computedStyles = getComputedStyle(this.nativeElement)\n\n        // scale the comment top/left positions from stored values and possibly\n        // different viewport size (with width diff because height does not affect scaling\n        let scaledTopPos = (newViewportWidth * this.top) / this.viewportDimension.width\n        let scaledLeftPos = (newViewportWidth * this.left) / this.viewportDimension.width\n        \n        // let topFix = 25;\n\n        // height and width only exist when the element exists in the DOM\n        this.nativeElement.style.top = `${(scaledTopPos + 28)}px`\n        this.nativeElement.style.left = `${scaledLeftPos}px`\n\n        return this\n    }\n\n    removeFrom(page: Page)\n    {\n        this.nativeElement.remove()\n\n        return this\n    }\n\n    serialize()\n    {\n        return {\n            top: this.top,\n            left: this.left,\n            text: this.text,\n            pageNum: this.pageNum,\n            scrollPos: this.scrollPos,\n            viiewportDimension: this.viewportDimension,\n            author: this.author,\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/model/comment.model.ts","function cleanArray(actual) {\n    let newArray = new Array()\n\n    for (let i = 0; i < actual.length; i++) {\n        if (actual[i]) {\n            newArray.push(actual[i]);\n        }\n    }\n    return newArray;\n}\n\nfunction compare(a, b) {\n    let diff = (b-a)\n    if (diff > 5 && diff <= 10) {\n\n    }\n\n    return [a, b+5]\n}\n\nexport function safariFix()\n{\n    let svgs = document.querySelectorAll('tspan')\n\n    for (var i=0; i < svgs.length; i++) {\n        const svgElement = svgs[i]\n        const attr = svgElement.getAttribute('x')\n\n        if (null == attr) {\n            return;\n        }\n\n        let xAttrs = attr.split(' ').map(val => { return (val == '') ? null : parseFloat(val.trim()) })\n        // attrs = attrs.filter(val => { return val != '' })\n\n        if (xAttrs.length <= 1) {\n            continue;\n        }\n\n        let list = []\n\n        for (let i in xAttrs) {\n            const value = xAttrs[i]\n\n            if (parseInt(i) >= xAttrs.length) {\n                continue;\n            }\n\n            const nextValue = xAttrs[i+1]\n            xAttrs[i+1] = nextValue\n            list.push(value)\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/safari.fix.ts"],"sourceRoot":""}